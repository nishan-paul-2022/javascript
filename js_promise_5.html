<!doctype html>
<html>
	<body>
		<h2>JavaScript Promise</h2>

		<p id="demo"></p>

		<script>
			function ExecutorFunction(myResolve, myReject) {
				const req = new XMLHttpRequest();
				req.open('GET', 'https://reqres.in/');
				req.onload = function () {
					if (req.status === 200) {
						myResolve('req.response');
					} else {
						myReject('File not Found');
					}
				};
				req.send();
			}

			function myDisplayer1(value) {
				document.getElementById('demo').innerHTML = value;
				return 'helloWorld';
			}

			function myDisplayer2(value, mine) {
				document.getElementById('demo').innerHTML = value;
				console.log(mine);
				return null;
			}

			function Func01() {
				const myPromise = new Promise(ExecutorFunction);

				const x1 = myPromise.then((value) => {
					myDisplayer1(value);
				});

				x1.then(
					() => {},
					(value) => {
						const mine = 'JOSS';
						myDisplayer2(value, mine);
					}
				);
			}

			async function Func02() {
				const myPromise = new Promise(ExecutorFunction);
				const x2 = myPromise.catch(myDisplayer1).then(myDisplayer1);
				console.log(x2 instanceof Promise);
				const value = await x2;
				console.log(value);
				console.log(x2);
			}

			function Func03() {
				const myPromise = new Promise(ExecutorFunction);
				const x3 = myPromise.then(myDisplayer1).then((value) => {
					console.log(value);
				});
				console.log(x3 instanceof Promise);
			}

			function PromiseChain() {
				function En(rejectValueP2) {
					function Fn(resolve, _reject) {
						resolve(rejectValueP2);
					}
					return Fn;
				}

				function Gn(rejectValueP2) {
					const Fn = En(rejectValueP2);
					const P3 = new Promise(Fn);
					return P3;
				}

				function Hn(resolveValueP3) {
					console.log(resolveValueP3);
				}

				const P2 = new Promise((_resolve, reject) => {
					reject('P2-REJECT');
				});

				P2.catch(Gn).then(Hn);
			}

			Func01();
			Func02();
			Func03();
			PromiseChain();

			/*
			- recursive function : function calling function itself

			- nested function / closure : function within function 
					# main concept behind closure : child function can access all members of parent function
					:: static member
					:: data encapsulation
					:: predefined beahviour of function
					:: memorization
					:: currying 

			- nested function calling : funtion calling function 
					:: callback hell : callback within callback


			- individual error handling function for individual promise 
			- common error handling function for individual promise
			- collective error handling function for all promises  
			*/
		</script>
	</body>
</html>
